// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["fullTextSearch", "fullTextIndex"]
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Account {
  id         String   @id @default(cuid())
  username   String   @unique @db.VarChar(255)
  email      String?  @unique @db.VarChar(255)
  password   String   @db.LongText
  token      String?  @db.LongText
  status     Status   @default(ACTIVE)
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  @@map("accounts")
}

model Product {
  id                  String      @id @default(cuid())
  name                String
  large_size_amount   Int?
  regular_size_amount Int?
  fixed_amount        Int?
  type                ProductType
  status              Status      @default(ACTIVE)
  created_at          DateTime    @default(now())
  updated_at          DateTime    @updatedAt
  Order               Order[]

  @@fulltext([name])
  @@map("products")
}

model Order {
  id              String   @id @default(cuid())
  product_id      String
  quantity_sale   Int
  order_type_size String
  base_amount     Int
  sub_total       Int
  order_date      DateTime @db.Date
  status          Status   @default(ACTIVE)
  created_at      DateTime @default(now())
  updated_at      DateTime @updatedAt
  product         Product  @relation(fields: [product_id], references: [id])

  @@map("orders")
}

model SalesTarget {
  id         String          @id @default(cuid())
  month      String?
  year       Int?
  target     Int
  type       SalesTargetType
  created_at DateTime        @default(now())
  updated_at DateTime        @updatedAt

  @@unique([month, year])
  @@map("sales_targets")
}

model GraphDomain {
  id         String          @id @default(cuid())
  max_domain Int
  type       SalesTargetType
  created_at DateTime        @default(now())
  updated_at DateTime        @updatedAt

  @@map("graph_domains")
}

enum ProductType {
  CHEEZE_TEA
  MILK_TEA
  SERRADURA
  GREEN_TEA_AND_LEMONADE
}

enum ProductSize {
  REGULAR
  LARGE
}

enum Status {
  ACTIVE
  INACTIVE
}

enum SalesTargetType {
  MONTH
  YEAR
}
